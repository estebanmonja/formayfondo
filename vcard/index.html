<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contact Card</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        neon: {
          500: '#ff0098'
        }
      },
      fontFamily: {
        sans: ['Inter', 'sans-serif']
      }
    }
  }
}
</script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
</head>

<body class="bg-white text-neutral-900 font-sans antialiased selection:bg-neon-500 selection:text-white">

<main class="min-h-screen flex items-center justify-center px-6">
  <div class="w-full max-w-sm border-2 border-black p-6">

    <!-- Logo -->
   <div class="mb-8">
  <img
    src="./assets/logo-horizontal.png"
    alt="Forma & Fondo Taller"
    class="w-full max-h-16 object-contain object-left"
  />
</div>

    <!-- Name -->
    <h1 class="text-3xl font-black tracking-tight leading-tight">
      <span id="firstName">—</span><br>
      <span id="lastName">—</span>
    </h1>

    <!-- Role -->
    <p id="role" class="mt-2 text-sm font-bold uppercase tracking-widest text-neon-500">
      —
    </p>

    <!-- Divider -->
    <div class="h-1 w-12 bg-black my-6"></div>

    <!-- Info -->
    <div class="space-y-3 text-sm font-medium">
      <div>
        <span class="block text-xs uppercase tracking-widest text-neutral-400">Company</span>
        <span id="company">—</span>
      </div>

      <div>
        <span class="block text-xs uppercase tracking-widest text-neutral-400">Email</span>
        <a id="email" href="#" class="hover:text-neon-500 transition-colors">—</a>
      </div>

      <div>
        <span class="block text-xs uppercase tracking-widest text-neutral-400">Phone</span>
        <a id="phone" href="#" class="hover:text-neon-500 transition-colors">—</a>
      </div>

      <div>
        <span class="block text-xs uppercase tracking-widest text-neutral-400">Website</span>
        <a id="website" href="#" target="_blank" class="hover:text-neon-500 transition-colors">—</a>
      </div>

      <div>
        <span class="block text-xs uppercase tracking-widest text-neutral-400">LinkedIn</span>
        <a id="linkedin" href="#" target="_blank" class="hover:text-neon-500 transition-colors">—</a>
      </div>
    </div>

    <!-- Notes -->
    <p id="notes" class="mt-6 text-xs text-neutral-500 leading-relaxed"></p>

    <!-- CTA -->
    <button
      onclick="downloadVCard()"
      class="mt-8 w-full py-4 bg-black text-white font-black uppercase tracking-widest text-xs hover:bg-neon-500 transition-colors"
    >
      Save to Contacts
    </button>

  </div>
</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCuQl3fcJBIbSERG5BllWZJQxL7uIV5dHs",
  authDomain: "vcard-9a336.firebaseapp.com",
  databaseURL: "https://vcard-9a336-default-rtdb.firebaseio.com",
  projectId: "vcard-9a336",
  storageBucket: "vcard-9a336.firebasestorage.app",
  messagingSenderId: "629638484734",
  appId: "1:629638484734:web:a13eed59cc8f4949c54baf"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const profileRef = ref(db, "profile");

let profileData = {};

onValue(profileRef, (snapshot) => {
  const p = snapshot.val();
  if (!p) return;
  profileData = p;

  firstName.textContent = p.firstName || "";
  lastName.textContent  = p.lastName  || "";
  role.textContent      = p.role      || "";
  company.textContent   = p.company   || "";

  email.textContent = p.email || "";
  email.href = p.email ? `mailto:${p.email}` : "#";

  phone.textContent = p.phone || "";
  phone.href = p.phone ? `tel:${p.phone}` : "#";

  website.textContent = p.website || "";
  website.href = p.website || "#";

  linkedin.textContent = p.linkedin || "";
  linkedin.href = p.linkedin || "#";

  notes.textContent = p.notes || "";
});

window.downloadVCard = () => {
  const p = profileData;
  if (!p.firstName || !p.lastName) return;

  const vcard = `
BEGIN:VCARD
VERSION:3.0
N:${p.lastName};${p.firstName};;;
FN:${p.firstName} ${p.lastName}
ORG:${p.company || ""}
TITLE:${p.role || ""}
TEL;TYPE=CELL:${p.phone || ""}
EMAIL:${p.email || ""}
URL:${p.website || ""}
END:VCARD
`.trim();

  const blob = new Blob([vcard], { type: "text/vcard" });
  const url = URL.createObjectURL(blob);

  const a = document.createElement("a");
  a.href = url;
  a.download = `${p.firstName}_${p.lastName}.vcf`;
  a.click();

  URL.revokeObjectURL(url);
};
</script>

</body>
</html>
