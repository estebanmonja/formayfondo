<div id="tangram-site-wrapper" style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; background-color: #d0d0d0;">
    
    <style>
        /* CSS is inside the embed for scope */
        body {
            /* Override potential external styles */
            height: 100vh;
            margin: 0;
            background-color: #d0d0d0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; 
        }

        #tangram-display {
            display: flex;
            align-items: center; 
        }

        /* Abstract Tangram Arrow Styling */
        .arrow {
            width: 80px; 
            height: 80px; 
            background-color: #a0a0a0; 
            position: relative;
            cursor: pointer;
            margin: 0 30px; 
            transition: background-color 0.2s ease-in-out;
            /* Ensure the click target is the visible part of the triangle */
            z-index: 10; 
        }

        .arrow:hover {
            background-color: #808080; 
        }

        /* Left Arrow - Triangle pointing left */
        .arrow.left {
            clip-path: polygon(100% 0, 100% 100%, 0% 50%); 
        }

        /* Right Arrow - Triangle pointing right */
        .arrow.right {
            clip-path: polygon(0% 0, 100% 50%, 0% 100%); 
        }

        #tangram-container {
            width: 350px; 
            height: 350px;
            overflow: hidden;
            display: flex; 
            justify-content: center;
            align-items: center;
            /* Give it a little breathing room in case of Google Sites padding */
            padding: 10px;
        }

        #tangram-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: opacity 0.3s ease-in-out;
        }
    </style>

    <div id="tangram-display">
        <div id="prev-btn" class="arrow left"></div>

        <div id="tangram-container">
            <img id="tangram-img" src="" alt="Tangram figure">
        </div>

        <div id="next-btn" class="arrow right"></div>
    </div>

</div>

<script>
    // This script must be placed after the HTML elements it targets
    const tangramImg = document.getElementById('tangram-img');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    // !!! IMPORTANT: UPDATE THESE PATHS WITH YOUR PUBLICLY HOSTED IMAGE URLS !!!
    const figures = [
        { default: '0000.png', hover: '0001.png', alt: 'Camel tangram' },
        { default: '0010.png', hover: '0011.png', alt: 'Swan tangram' }
    ];

    let currentIndex = 0; 
    let isHovered = false; 

    function updateTangramImage() {
        const currentFigure = figures[currentIndex];
        tangramImg.src = isHovered ? currentFigure.hover : currentFigure.default;
        tangramImg.alt = currentFigure.alt;
    }

    function showNextFigure() {
        currentIndex = (currentIndex + 1) % figures.length;
        isHovered = false; 
        updateTangramImage();
    }

    function showPrevFigure() {
        currentIndex = (currentIndex - 1 + figures.length) % figures.length;
        isHovered = false; 
        updateTangramImage();
    }

    function handleTangramEnter() {
        isHovered = true;
        updateTangramImage();
    }

    function handleTangramLeave() {
        isHovered = false;
        updateTangramImage();
    }

    // Attach event listeners
    if (tangramImg) {
        tangramImg.addEventListener('mouseenter', handleTangramEnter);
        tangramImg.addEventListener('mouseleave', handleTangramLeave);
        tangramImg.addEventListener('touchstart', handleTangramEnter);
        tangramImg.addEventListener('touchend', handleTangramLeave);
        tangramImg.addEventListener('touchcancel', handleTangramLeave); 
    }

    if (nextBtn) {
        nextBtn.addEventListener('click', showNextFigure);
    }
    
    if (prevBtn) {
        prevBtn.addEventListener('click', showPrevFigure);
    }

    // Initialize
    updateTangramImage();
</script>
